2008-04-19 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* sorcery: sanitized the saving of CCACHE in the feature_menu
	  fixed CCACHE and STORE_CONF_LOG not being disablable
	  rewrote feature_menu to be much more concise and removed the extra
	  variable fallbacks, since most are already in the sorcery config
	  improved printing of the grimoire changelog
	* config: added defaults for COLOR, CONFIG_LOC and GATHER_DOCS
	* scribe: fixed case in scribe update message

2008-04-18 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libsorcery: don't clear the line on every queuing progress bar update

2008-04-17 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libsorcery: made verbose queuing use the version cache too and now all
	  the reasons are displayed, not just the first (only in the cache code)
	  readded the progress bar, but only to the slow part of the queuing
	  removed an extra space in list_install_queue
	  reformatted and sanitized list_install_queue
	  also add held spells to the (tablet) version cache
	  don't queue held spells in either verbosity mode

2008-04-16 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* scribe.8: don't mention local grimoires for reindex-version, nothing good
	  can come of it
	* libdepends: when falling back to installed spells as default choices for
	  providers, try to use the currently used provider; added a warning
	* libcast: made run_conflicts query in QUERY_COLOR
	* libsorcery: removed a use of hardcoded $INSTALL_CACHE
	  change tee to sed p in clean_logs, it didn't work nicely for Vlad

2008-04-15 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* state: added VERSION_STATUS=${STATE_DIRECTORY}/versions
	* libtablet: added tablet_{create,check}_version_cache for creating a
	  cache of installed spells' queuing factors - the system variant of
	  scribe reindex-version; allows for a great speedup in sorcery queue
	* libstate: added remove_version_cache and add_version_cache for keeping
	  the tablet version cache up to date
	* common, libresurrect, libdispel: update the tablet version cache when
	  needed
	* libcodex: don't insert anything into the cache for multiversioned spells
	* libresurrect: fixed bad variable name in previous commit
	* libsorcery: changed silent queuing to use the new version caches

2008-04-14 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libunpack: removed one of the parameters to uncompress_unpack and
	  made it pass on possible hints to uncompress/unpack;
	  changed unpack_core to allow for perserving permissions and owners;
	  uncompress_unpack_cache now requests the above via a hint

2008-04-13 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* gaze: don't show find errors when searching for aliens

2008-04-12 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* scribe: fixed progress message when reindexing keywords or versions
	* dispel: display the version of the downgraded spell too

2008-04-11 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libsorcery: sanitized a check in build_install_queue
	  fixed two typos and added optional verbose sorcery queue-ing - it now
	  prints why the spell was added to the queue; also displayed for cast -Z
	* config: added VERBOSE_QUEUING=on

2008-04-11 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libcodex: added codex_create_version_cache; will be used for a faster
	  sorcery queue
	* scribe: added scribe_reindex_version which calls it
	* scribe.8: added reindex-version
	* config: defined VERSION_INDEX_FILE

2008-04-11 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libressurect: always use the saved version after setting the spell
	* libsorcery: rewrote log_list to conform with sorcery standards and be 50
	  times faster; made it also echo castfs logs and echo absolute paths
	  rewrote clean_logs to be more slick and as a result a lot faster
	  formatting and "localisation" fixes to activity_log

2008-04-10 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libressurect, libgpg: fixed some comments and error messages
	* libressurect: fallback to the variable's contents, not its name if the
	  current variable is empty/unset
	* sustained: added some missing basesystem entries and removed the now
	  nonexistant util-linux-crypto
	* libgpg: fixed gpg_verify_grimoire not liking versioned grimoires #13461

2008-04-08 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libtrack: added find_cache, a function similar to guess_filename for
	  finding caches from part of their name
	  added construct_cache_name which currently just appends $ARCHIVEBIN
	  modified create_cache_archive to be more generic
	* alter, dispel, common: use the new functions to be more abstract; now
	  caches created with a different compressor than the current work too
	* libunpack: added optional params to unpack_uncompress and a wrapper for
	  caches uncompress_unpack_cache
	* libressurect: fixed can_resurrect to accept other extensions
	  made ressurect use the new unpack_uncompress wrapper
	* libsorcery: made spell_recover use ressurect
	  set_compression_type now distinguishes between compressors and archivers;
	  tar is now saved to ARCHIVEBIN, EXTENSION holds the compressed extension
	* config: added a default for ARCHIVEBIN
	* api2: preserve the return status in run_pre_install
	* all this was part of bug #14218, FIXMEs and planned support for other
	  compressors and archivers

2008-04-02 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libcodex: added codex_find_spell_provides which prints the features
	  the spell is a provider of
	* libdepends: added support for recasting of spells that have a disabled
	  dependency on a feature which the cast spell is a provider of. Part of
	  private_recast_optionals
	  fixed formatting of the previous change
	* libstate: changed a regex in toggle_depends_status to be more general
	  added change_spell_provider for silently changing and toggling providers
	* libstate, libsorcery, libcodex: moved codex_is_local and find_providers
	  to libcodex
	* libapi: fixed #9676 using a slightly modified comment from the real code
	* libunpack: fixed typos in two comments

2008-03-31 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libmisc: added an esc_provider_str function for queries that look for
	  spells that provide the provider, where the initial .* should not be
	  escaped. This was broken since esc_str became consistent on 2008-03-26
	* libstate: use esc_provider_str for the second argument in the
	  search_depends_status* functions
	  added a toggle_depends_status for toggling dependencies on/off
	* libdepends: fixed private_recast_optionals. It never worked. #14411

2008-03-30 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libstate: added a workaround to search_depends_status_exact for provider
	  functions, since they were broke after the 2008-03-26 esc_str fix
	* common: check if the iw log exists before using it in run_spell_succes
	* libtrack: reformatted exists() and made it use a local variable
	* libgrimoire: dereference the deaddir in rm_source_dir #14399

2008-03-28 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libmedia: reset the color in the CHECK_ and MESSAGE_COLOR definitions, so
	  they can't inherit the bold atribute from the other colors
	* api2: added some more messages to cast stages, initial patch from Sergey
	  Lipnevich #8521
	* libgrimoire: real_rm_source_dir: use local variables and a simpler loop
	* gaze, gaze.1: added size -all, initial patch from Danilo Vidovic #13556
	* url_git_local: added an url handler for local git urls, patch by Andra≈æ
	  Levstik #14397; fixed the comments and removed the netselect function
	* libmisc: made esc_str forkless and optionally return by reference
	* libstate, libtriggers, libsorcery: use esc_str by reference
	* liblock: save the escaped string in lock_kill_transaction
	* libstate: converted two inline esc_str calls to the forkless version
	* libcast: reformatted show_download_progress and made it a bit less dumb
	* libgpg: nicely quit verify_grimoire_tree for alien grimoire trees #14398

2008-03-27 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* changed uses of plain sort|uniq to the featurewise equivalent sort -u
	  and then the same for uses of plain sort file|uniq
	* cast, dispel, gaze, sorcery, libdepends: use hash_get_ref some more
	* dispel: commented out four debug statements with inline code

2008-03-26 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libsorcery: deprecated dirnames() for get_dirnames() in libmisc
	  cleaned up guess_filename
	* libmisc: adjusted formatting in get_dirnames and get_basenames and made
	  them use the faster internal smgl_dirname and smgl_basename respectively
	* libdispel, libmisc: fixed the only three callers to use get_dirnames
	* common: cleaned up install_pam_confs
	* libdepends: use real_list_find in private_should_cast instead of forking
	  fixed the check if spell is held in real_sub_depends and improved the msg
	  use real_list_find in private_up_trigger
	  use real_list_find in work_{,optional_}depends_provider
	  fixed private_upward_depends matching spells too loosely
	  use real_list_find in private_run_depends
	  use real_list_find everywhere else
	  fixed real_show_up_depends showing false positives
	* libcodex: silence the unused codex_remove_duplicates with real_list_find
	* applied a modified patch from Arvid Norlander, which mainly changes uses
	  of hash_get to has_get_ref, removes double evaluations and improves some
	  formatting
	* dl_wget, liburl, url_http: use real_list_find instead of echo | grep -q
	* libmisc: fixed esc_str not escaping strings starting with .
	* cleanse: cleanse_fix_ldd_check: use hash_get_ref, don't do the lookup
	  twice and trick wc
	* dispel, libstate: use hash_get_ref some more
	* config: revert the recent addition of STAGED_INSTALL, so
	  is_castfs_installed gets a chance to be run

2008-03-25 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libsorcery: reformatted the files, directories and symlinks functions and
	  made their variable local
	  then did the same for dirnames
	* config: added STAGED_INSTALL default and added DEBUG to the unstaged list
	* libsorcery: rewrote filename_indicates_compression to be less dumb
	* roots: honor environment variables #13263 and improve sourcing #14304

2008-03-24 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* libcodex: made a few trivial optimisations, making the remaining relevant
	  functions return by reference
	  fixed ENTERED typo in codex_clear_current_spell and two comments
	* grimoire.5, libcodex, libtablet: made BUILD_API=2 the default
	* libmisc: simplified and sped up is_sorcery_var
	* dispel: made downgrading more user friendly #11749; now a list of
	  possible versions is displayed to choose from and the version
	  doesn't need to be specified on the commandline anymore
	* scribe: scribe index now also shows VERSION of grimoires #14233

2008-03-24 Jaka Kranjc <lynxlynxlynx@sourcemage.org>
	* Start 1.15 development stream.
