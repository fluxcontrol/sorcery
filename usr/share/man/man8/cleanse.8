.TH "CLEANSE" "8" "August 2004" "Source Mage GNU Linux" "System Administration"
.SH "NAME"
cleanse \- Cleans sorcery system files of lint and accumulated garbage
.SH "SYNOPSIS"
.B cleanse
[\-\-packages]
[\-\-delint [full]]
[\-\-tablet [coalesce]]
[\-\-tablet_spell spell-name]
[\-\-prune [doit]]
[\-\-sweep]
[\-\-sweep_all]
[\-\-logs]
[\-\-fix]
[\-\-nofix]
[\-\-nofix_quick]
.SH "EXAMPLE"
To check everything type:
.IP 
.B cleanse
.SH "DESCRIPTION"
.I cleanse
is part of the
.SM sorcery
source\-code package management suite. It is a command\-line tool for fixing and cleaning files maintained by sorcery.
.SH "OPTIONS"
.TP 
.B "\-\-packages"
Find bad lines in the list of installed spells. This includes badly formated lines, spells that are installed but don't exist in any grimoires, and duplicate lines.

.TP 
.B "\-\-delint [full]"
Finds bad dependency lines. This includes badly formated lines, dependencies on spells that aren't installed, and duplicate dependencies.
If 'full' is specified, then all lines will be examined, not just lines where at least one of the spells is installed.

.TP 
.B "\-\-tablet [coalesce]"
Fixes broken tablets, removes orphaned tablets, removes duplicate tablets.
If 'coalesce' is specified then duplicate files are hardlinked together, this results in a significant reduction in space. Do not use this if you plan on editing the tablet with an editor that does not break hardlinks.

.TP 
.B "\-\-tablet_spell spell-name"
Fixes tablet for just the specified spell.
.TP 
.B "\-\-prune [doit]"
Finds spells that should be installed but aren't, finds spells that shouldn't be installed but are, and Prunes the dependency shrub. If 'doit' is specified, the cast and dispel actions are done for you. Otherwise the suggested commands are given to you at the end to run yourself.
.TP 
.B "\-\-sweep"
Deletes unnecessary sources and binary caches. Files are kept if any spell/version in any grimoire could use them. This replaces 'gaze prune'
.TP
.B "\-\-sweep_all"
Deletes unnecessary sources and binary caches. Only files that could
be used by the first occurence of an installed spell are kept.

.TP
.B "\-\-logs"
Removes stale compile, install and md5sum logs. Only the logs of the current versions of the currently installed spells are kept.

.TP 
.B "\-\-fix"
Discover and fix broken spells. Four methods are used to do this.
The methods may be toggled using sorcery\->Option\->Integrity Checking.
A fix is automatically issued after a
.B sorcery update.
.IP 
.I "Find Check"
.IP 
Discovers missing binary executables, libraries and header files.
.IP 
.I MD5Sum Check
.IP 
Discovers modified executables and libraries.
.IP 
.I Ldd Check
.IP 
Discovers Broken executables and libraries.
.IP 
.I Sym Check
.IP 
Discovers miss\-owned symbolic links to files.

.TP
.B "\-\-nofix"
Similar to \-\-fix but attempts to discover and report instead of fixing. Uses the same four methods as \-\-fix to find broken spells.

.TP
.B "\-\-nofix_quick"
Similar to \-\-nofix but does not check dependent spells. Uses the same four methods as \-\-fix to find broken spells.

.TP 
.B "\-h, \-\-help"
Display short help.
.SH "FILES"
The config files can be edited by hand, but it is easier to edit them with sorcery.
.TP 
.I /etc/sorcery/config
.IP 
Configuration options.
.TP 
.I /etc/sorcery/local/config
.IP 
Various local settings and compiler optimisation parameters (select with
sorcery).
.TP 
.I /var/state/sorcery/packages
.IP 
Installed spell list
.TP 
.I /var/state/sorcery/depends
.IP 
Dependency listings for all installed spells
.SH "AUTHOR"
Original version by Paul Mahon.
.PP 
Maintained by the Source Mage GNU Linux Team (http://www.sourcemage.org)
.PP 
.SH "REPORTING BUGS"
Report bugs to bugzilla <http://bugs.sourcemage.org>
.SH "SEE ALSO"
confmeld(8), dispel(8), gaze(1), grimoire(5), invoke(8), sorcery(8), scribe(8), summon(8), scribbler (8)
.SH "WARRANTY"
This is free software with ABSOLUTELY NO WARRANTY
